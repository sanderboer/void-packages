# Template file for 'ifcopenshell'
pkgname=ifcopenshell
version=0.6.0
revision=1

wrksrc="IfcOpenShell-${version}"
distfiles="https://github.com/sanderboer/IfcOpenShell/archive/v${version}-patched.tar.gz"
checksum=43f958b41c07a692805dcddd6b7706fa1316cd58ac48d80de33bb145743b4afe

build_style=cmake
_blenderversion=2.82
configure_args="
-Wno-dev
-DCMAKE_INSTALL_PREFIX=/usr
-DOCC_INCLUDE_DIR=/usr/include/opencascade
-Dgp_Pnt_hxx=/usr/include/opencascade/gp_Pnt.hxx
-DPYTHON_INCLUDE_DIR=/usr/include/python3.8
-DPYTHON_EXECUTABLE=/bin/python3
-DPYTHON_LIBRARY=/usr/lib/libpython3.8.so
-DLIBXML2_INCLUDE_DIR=/usr/include/libxml2
-DLIBXML2_LIBRARIES=/usr/lib/libxml2.so
../cmake/
"
patch_args="-Np1"
hostmakedepends="swig"
makedepends="python3-devel boost-devel occt-devel icu-devel libxml2-devel opencollada-devel pcre-devel"
depends="python3 boost occt libxml2 opencollada icu"

short_desc="Open source ifc toolkit and geometry engine. Provides IfcConvert IfcGeomserver, ifcopenshell python bindings and blender ifc import addon"
maintainer="Sander Boer <sanderboer@mauc.nl>"
license="LGPL-v3.0"
homepage="http://www.ifcopenshell.org/"

post_install(){
  vmkdir usr/share/blender/${_blenderversion}/scripts/addons_contrib
  vcopy src/ifcblender/* usr/share/blender/${_blenderversion}/scripts/addons_contrib/
  }

