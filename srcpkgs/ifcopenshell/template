# Template file for 'ifcopenshell'
pkgname=ifcopenshell
version=0.6.0.git
_branch=0.6.0-swig4
revision=1
#archs="i686 x86_64"
wrksrc="IfcOpenShell-${_branch}"
build_style=cmake
_blenderversion=2.81a
#create_wrksrc=yes
configure_args="
-Wno-dev
-DCMAKE_INSTALL_PREFIX=/usr
-DOCC_INCLUDE_DIR=/usr/include/opencascade
-Dgp_Pnt_hxx=/usr/include/opencascade/gp_Pnt.hxx
-DPYTHON_INCLUDE_DIR=/usr/include/python3.8
-DPYTHON_EXECUTABLE=/bin/python3
-DPYTHON_LIBRARY=/usr/lib/libpython3.8.so
-DLIBXML2_INCLUDE_DIR=/usr/include/libxml2
-DLIBXML2_LIBRARIES=/usr/lib/libxml2.so
-DSWIG_DIR=/usr/share/swig/4.0.1
-DSWIG_EXECUTABLE=/bin/swig
-DSWIG_VERSION=4.0.1
../cmake/
"
patch_args="-Np1"
hostmakedepends="swig"
makedepends="python3-devel boost-devel occt-devel icu-devel libxml2-devel opencollada-devel pcre-devel"
depends="python3 boost occt libxml2 opencollada icu"

short_desc="Open source ifc toolkit and geometry engine. Provides IfcConvert IfcGeomserver, ifcopenshell python bindings and blender ifc import addon"
maintainer="Sander Boer <sanderboer@mauc.nl>"
license="LGPL-v3.0"
homepage="http://www.ifcopenshell.org/"
distfiles="https://github.com/sanderboer/IfcOpenShell/archive/v${_branch}.zip"
checksum=f067a0a3515c7074ef906fb9f65748136a8b615c6c20ba6d0d573d2ef28c17bc

post_install(){
  vmkdir usr/share/blender/${_blenderversion}/scripts/addons_contrib
  vcopy src/ifcblender/* usr/share/blender/${_blenderversion}/scripts/addons_contrib/
  }

